<script type="text/javascript">
  $(document).ready(function () {

    $(".div_table").on("scroll", function() {
      $(".div_table").scrollLeft($(this).scrollLeft());
    });


    var ftds = document.querySelectorAll("td:nth-child(1)");
  choose = document.getElementById("choose");

choose.addEventListener("change", function isChosen(e) {
  ftds.forEach(function(ftd) {
    if(ftd.textContent.indexOf(e.target.value)>0){
      ftd.parentElement.classList.add("found")
    } else{
      ftd.parentElement.classList.remove("found");
    }
  });
});

$("th").hover(function(){
    $(this).css("color", "white");
    }, function(){
    $(this).css("color", "transparent");
  });
});
function hide_column(event){
  var idcolumn=event.target.id.substring(2);
  alert(idcolumn)
  document.getElementById('columnfake_'+idcolumn).style.display='none';
  document.getElementById('column_'+idcolumn).style.display='none';
}

</script>
<style type="text/css">
  .found {
  background: red;
}
/* Hide scrollbar for Chrome, Safari and Opera */
.no_scroll::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.no_scroll {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}
.scroll::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}

/* Hide scrollbar for IE, Edge and Firefox */
.scroll {
  
}
.icons{
  color: inherit!important;
  display: inline-block;
  width: auto;
  padding: 0px 2px;
}
.icons:hover{
  background: none;
}


</style>
<label for="choose" style="display: none;">Search ID:</label>
<input id="choose" style="display: none;" required >

<div class="table-responsive div_table no_scroll" style="height: 60px; overflow-y: hidden;">
      <table class="table table-hover m-0 card-body" style="font-size: 0.8em; text-align: center; border:solid 2px transparent;">
        <thead>
          <tr>
            <th class="th-hover" style="padding-top: 0px; vertical-align: middle; cursor: pointer; color: transparent;">
              <p style="color:white">#</p></th>
            <% @fields.each do |field|  %>
              <th style="height: 8vh; padding-top: 0px; vertical-align: middle; min-width: 100px; cursor: pointer; color: transparent;" id=<%="columnfake_"+field.name %>>
                <p style="color:white; margin-bottom: 0px"><%= field.name %></p>
                  <div>
                    <i class="fas fa-sort-alpha-down icons dropdown-item"></i>
                    <i class="fas fa-search icons dropdown-item"></i>
                    <i class="fas fa-times icons dropdown-item" onclick="hide_column(event)" id=<%="re"+field.name %>></i>
                  </div>
                </th>
            <% end %>
          </tr>
        </thead>
        <tbody style="visibility: hidden;">
          <% @projects_data.each do |project | %>
            <tr>
              <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                <%= project.id %></td>
                <% @fields.each do |field|  %>
                  <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                    <% if field.field_type_id == 7  %>
                     
                    <% else %>
                      <%= project.properties[field.key] if !project.properties[field.key].blank?%>
                    <% end %>
                  </td>
                <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
</div>
<div class="table-responsive div_table scroll"  style="height: 60vh; position: relative; z-index: 10">
      <table class="table table-hover m-0 card-body" style="font-size: 0.8em; position: relative;top: -52px; text-align: center;">
        <thead style="visibility: hidden; border-bottom: solid transparent">
          <tr>
            <th>#</th>
            <% @fields.each do |field|  %>
              <th style="min-width: 100px" id=<%="column_"+field.name %>><%= field.name %></th>
            <% end %>
          </tr>
        </thead>
        <tbody style="border-top: solid 2px transparent">
          <% @projects_data.each do |project | %>
            <tr>
              <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                <%= project.id %></td>
                <% @fields.each do |field|  %>
                  <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                    <% if field.field_type_id == 7  %>
                     
                    <% else %>
                      <%= project.properties[field.key] if !project.properties[field.key].blank?%>
                    <% end %>
                  </td>
                <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="pt-3">
      <%= pager @projects_data %>
    </div>

