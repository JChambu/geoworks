<script type="text/javascript">
//scroll de ambas tablas simultáneamente
$(document).ready(function () {
    $(".div_table").on("scroll", function() {
      $(".div_table").scrollLeft($(this).scrollLeft());
    });

//Selector cantidad por página
$(".option_perpage").click(function(){
  var selText = $(this).text();
  $(".select_perpage").html(selText+' <span class="caret"></span>');
  init_data_dashboard(10);
});



    var ftds = document.querySelectorAll("td:nth-child(1)");
  choose = document.getElementById("choose");

choose.addEventListener("change", function isChosen(e) {
  ftds.forEach(function(ftd) {
    if(ftd.textContent.indexOf(e.target.value)>0){
      ftd.parentElement.classList.add("found")
    } else{
      ftd.parentElement.classList.remove("found");
    }
  });
});

$(".th-hover").hover(function(){
    $(this).css("top", "-25px");
    }, function(){
    $(this).css("top", "0px");
  });
});
function hide_column(index){
  index+=2;
 $('table tr td:nth-child('+index+')').hide()
 $('table tr th:nth-child('+index+')').hide();
}

</script>
<style type="text/css">
  .found {
  background: red;
}
/* Hide scrollbar for Chrome, Safari and Opera */
.no_scroll::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.no_scroll {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}
.scroll::-webkit-scrollbar {
  width: 5px;
  height: 5px;
}

/* Hide scrollbar for IE, Edge and Firefox */
.scroll {
  
}
.icons{
  color: inherit!important;
  display: inline-block;
  width: auto;
  padding: 0px 2px;
}
.icons:hover{
  background: none;
}


</style>
<label for="choose" style="display: none;">Search ID:</label>
<input id="choose" style="display: none;" required >
<div class="card-header chart-header-bg-transparent py-1 px-2">
  Datos
  <div class="" style="float: right;">
    <div class="dropdown" style="display: inline-block;">
      <h6 class="dropdown-toggle select_perpage m-0 mr-3" type="button" id="dropdownMenuButton" data-toggle   ="dropdown" aria-haspopup="true" aria-expanded="false" style="font-size: 0.8em">
        20/pág
      </h6>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a class="dropdown-item option_perpage" href="#">20/pág</a>
        <a class="dropdown-item option_perpage" href="#">50/pág</a>
        <a class="dropdown-item option_perpage" href="#">100/pág.</a>
        <a class="dropdown-item option_perpage" href="#">mostrar todo</a>
      </div>
    </div>
      <nav aria-label="Page navigation example" style="display: inline-block;">
        <ul class="pagination pagination-sm m-0">
          <li class="">
            <a class="" href="#" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
              <span class="sr-only">Previous</span>
            </a>
          </li>
          <li><a class="" href="#">1</a></li>
          <li><a class="" href="#">2</a></li>
          <li><a class="" href="#">3</a></li>
          <li class="">
            <a class="" href="#" aria-label="Next">
              <span aria-hidden="true">&raquo;</span>
              <span class="sr-only">Next</span>
            </a>
          </li>
        </ul>
      </nav>
  </div>
</div>
<div class="table-responsive div_table no_scroll" style="height: 30px; overflow-y: hidden; border-bottom: solid 2px rgba(0,0,0,0.6);">
      <table class="table table-hover m-0 card-body" style="font-size: 0.8em; text-align: center; border:solid 2px transparent;">
        <thead>
          <tr>
            <th style="padding-top: 0px; vertical-align: top; cursor: pointer;">
              <p style="color:white; margin-bottom: 0px">#</p></th>
            <% @fields.each_with_index do |field, index|  %>
              <th style="height: 8vh; padding-top: 0px; vertical-align: top; min-width: 100px; cursor: pointer;" id=<%="columnfake_"+field.name %>>
                <div class="th-hover" style="position: relative;transition: 1s; top:0px;"  >
                <p style="color:white; margin-bottom: 0px"><%= field.name %></p>
                <div style="padding-top: 10px; padding-bottom:20px">
                  <i class="fas fa-sort-alpha-down icons"></i>
                  <i class="fas fa-search icons"></i>
                  <i class="fas fa-times icons" onclick="hide_column(<%=index%>)" id=<%="re"+field.name %>></i>
                </div>
                </div>
                </th>
            <% end %>
          </tr>
        </thead>
        <tbody style="visibility: hidden;">
          <% projects_data_local.each do |project | %>
            <tr>
              <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                <%= project.id %></td>
                <% @fields.each do |field|  %>
                  <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                    <% if field.field_type_id == 7  %>
                     
                    <% else %>
                      <%= project.properties[field.key] if !project.properties[field.key].blank?%>
                    <% end %>
                  </td>
                <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
</div>
<div class="table-responsive div_table scroll"  style="height: 38vh; position: relative; z-index: 10">
      <table class="table table-hover m-0 card-body" style="font-size: 0.8em; position: relative;top: -45px; text-align: center;">
        <thead style="visibility: hidden; border-bottom: solid transparent">
          <tr>
            <th>#</th>
            <% @fields.each do |field|  %>
              <th style="min-width: 100px" id=<%="column_"+field.name %>><%= field.name %></th>
            <% end %>
          </tr>
        </thead>
        <tbody style="border-top: solid 2px transparent" class="project_data_div">
          
          <% projects_data_local.each do |project | %>
            <tr>
              <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                <%= project.id %></td>
                <% @fields.each do |field|  %>
                  <td style="line-height: normal;padding: 2px; vertical-align: middle;">
                    <% if field.field_type_id == 7  %>
                     
                    <% else %>
                      <%= project.properties[field.key] if !project.properties[field.key].blank?%>
                    <% end %>
                  </td>
                <% end %>
            </tr>
          <% end %>
         
        </tbody>
      </table>
    </div>
    

