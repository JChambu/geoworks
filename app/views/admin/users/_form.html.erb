<div class="offset-md-3 col-md-6">
  <div class="card m-2 shadow">
    <div class="card-body">

      <%= simple_form_for([:admin,@user]) do |f| %>
        <%= render 'shared/errors', obj: @user %>

        <div class="form-group">
          <div class="row justify-content-center">
            <%= f.label :name, class:'col-md-4 text-right col-form-label' %>
            <div class="col-md-6">
              <%= f.input :name, label: false, input_html: {class: 'form-control form-control-sm'} %>
            </div>
          </div>

          <div class="row justify-content-center">
            <%= f.label :email, class:'col-md-4 text-right col-form-label' %>
            <div class="col-md-6">
              <%= f.input :email, label: false, input_html: {class: 'form-control form-control-sm'} %>
            </div>
          </div>

          <div class="row justify-content-center">
            <%= f.label 'CorporaciÃ³n', class:'col-md-4 text-right col-form-label' %>
            <div class="col-md-6">
              <%= f.input :customer_id, required: true, collection: customers_for_select, prompt: t('simple_form.select_item_prompt'), label: false, input_html: {class: 'form-control form-control-sm'}, selected: @customer.nil? ? '' : @customer.id%>
            </div>
          </div>

          <div class="row justify-content-center">
            <label class="col-md-4 text-right col-form-label">Rol</label>
            <div class="col-md-6">
              <div id='search_roles'></div>
            </div>
          </div>

          <div class="row justify-content-center">
            <label class="col-md-4 text-right col-form-label">Proyectos</label>
            <div class="col-md-6">
              <div id='search_projects'></div>
            </div>
          </div>

          <div class="row justify-content-center">
            <label class="col-md-4 text-right col-form-label">Campos</label>
            <div class="col-md-6">
              <div id='search_fields'></div>
            </div>
          </div>

          <div class="row justify-content-center">
            <label class="col-md-4 text-right col-form-label">Datos</label>
            <div class="col-md-6">
              <div id='search_data'></div>
            </div>
          </div>

          <div class="row justify-content-center">
            <%= f.label 'Activo', class:'col-md-4 text-right form-check-label' %>
            <div class="col-md-6">
              <%= f.check_box :active, label: false, input_html: {class: 'form-check-input'} %>
            </div>
          </div>
        </div>

        <div class="row justify-content-center">
          <%= link_to t('.cancel', :default => t("helpers.links.cancel")), admin_users_path, :class => 'btn btn-secondary mr-1' %>
          <%= f.submit  :class => 'btn btn-primary', value: 'Guardar' %>
        </div>

      <% end %>

    </div>
  </div>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $('#user_customer_id').on('change', function() {
      $.ajax({
        url:  "<%= admin_users_search_projects_path %>",
        type: "POST",
        data: { customer_name: $(this).val() }
      });

      $.ajax({
        url:  "<%= admin_users_search_roles_path %>",
        type: "POST",
        data: { customer_name: $(this).val() },
      });
    });
  });
</script>
